{% extends "import.html" %}

{% block content %}

<center><h2>Plant Disease Classification Using Deep Learning</h2></center>

<div class="container">
    <!-- B√™n tr√°i: Upload ·∫£nh -->
    <div class="section">
        <form id="upload-file" method="post" enctype="multipart/form-data">
            <label><strong>Ch·ªçn ·∫£nh c√¢y c·∫ßn ch·∫©n ƒëo√°n:</strong></label><br><br>
            <input type="file" name="file" class="btn btn-success" id="imageUpload" accept=".png, .jpg, .jpeg"><br><br>
        </form>

        <div class="image-section" style="display:none;">
            <img id="imagePreview" class="img-responsive" src="#" style="width:300px;height:300px;"/><br><br>
            <div>
                <button type="button" class="btn btn-info btn-lg" id="btn-predict">Predict!</button>
            </div>
        </div>

        <div class="loader" style="display:none;"></div>
        <h3 id="result"><span></span></h3>
    </div>

    <!-- B√™n ph·∫£i: Chatbot -->
    <div class="section chat-container">
        <div class="chat-header">Chatbot AI</div>
        <div class="chat-box" id="chat-box"></div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Nh·∫≠p tin nh·∫Øn..." onkeypress="handleKeyPress(event)">
            <button id="send-btn">G·ª≠i</button>
        </div>
    </div>

<div class="chat-history-dropdown">
    <button id="history-btn">üìú Xem l·ªãch s·ª≠ tr√≤ chuy·ªán</button>
    <button id="new-chat-btn">üí¨ Th√™m m·ªõi cu·ªôc tr√≤ chuy·ªán</button>
    <ul id="chat-history-list" class="chat-history-list" style="display:none;"></ul>
</div>



</div>

{% endblock %}




# @app.route('/predict', methods=['POST'])
# def upload():
#     if 'file' not in request.files:
#         return "No file uploaded", 400
#
#     files = request.files.getlist('file')
#     results = []
#
#     for f in files:
#         filename = secure_filename(f.filename)
#         file_path = os.path.join(UPLOAD_FOLDER, filename)
#         f.save(file_path)
#         predicted_label = predict_disease(file_path)
#         results.append({
#             "filename": filename,
#             "prediction": predicted_label
#         })
#
#     return jsonify(results)